Name: 同程开发票
Desc: 查询开具发票的方法和进度
Detailed_desc: 首先根据用户提供的订单信息查询该订单的开票方式. 对于平台开具的情况, 根据用户会员卡的不同等级执行不同的开发票方式.

SLOTs:
  - name: order_id
  - name: name
  - name: card_id
  # 下面是API返回值 -- TODO: 对齐code中的命名? 
  - name: 开票方式
    desc: 包括 平台开具 和 酒店开具
  - name: 开票信息进度
    desc: 后端数据库中是否有开票信息
  - name: 卡类型
  - name: 发票类型
    available_types: ["电子普票", "纸质普票", "纸质专票"]

APIs:
  - name: 查询开票方式
    request: [order_id]
    response: [开票方式]
  - name: 查询开票进度
    request: [name]
    response: [开票信息进度]
  - name: 查询会员状态
    request: [card_id]
    response: [卡类型]

ANSWERs:
  - name: 结束回复1
    desc: 您的同程开发票操作已成功执行，开票方式为酒店开具。
  - name: 结束回复2
    desc: 未查到您的发票信息，请前往mis售后地图查看详细进度。
  - name: 白金电子普票开具
    desc: 电子普票支持的开票内容为代订住宿费或者代订房费。\n\n可提交开通电子普票的申请，跳转对应订单开发票页面；提交后，离店日24小时内发送至您的邮箱。
  - name: 白金纸质发票开具
    desc: 纸质普票支持的开票内容为代订住宿费或者代订房费。\n\n可提交开通纸质普票的申请，跳转对应订单开发票页面；提交后，离店后5个工作日内送达。
  - name: 白金纸质专票开具
    desc: 纸质专票开通。对客话术：  \n①纸质专票烦您提供：发票抬头、纳税人识别号、注册地址、公司电话、开户银行、银行账号、发票金额  \n②是否需要备注订单信息（酒店名称、入住日期、离店日期）呢？  \n③请您提供下收件人、联系电话、地址（省市区）哦
  - name: 非白金电子票开具
    desc: 电子普票支持的开票内容为代订住宿费或者代订房费。 \n\n可提交开通电子普票的申请，跳转对应订单开发票页面；提交后，离店日24小时内发送至您的邮箱。
  - name: 非白金纸质普票
    desc: 纸质普票支持的开票内容为代订住宿费或者代订房费。\n\n可提交开通纸质普票的申请，跳转对应订单开发票页面；提交后，离店后5个工作日内送达。\n\n根据您的会员等级，您申请纸质发票邮寄需要10元邮费哦，申请成功后会给您订单手机号发送支付短链，您可点开短链支付。
  - name: 非白金纸质专票
    desc: 纸质专票支持的开票内容为代订住宿费或者代订房费。\n\n可提交开通纸质专票的申请，跳转对应订单开发票页面；提交后，离店后5个工作日内送达。\n\n根据您的会员等级，您申请纸质发票邮寄需要10元邮费哦，申请成功后会给您订单手机号发送支付短链，您可点开短链支付。

PDL: |
  [开票方式] = API_查询开票方式([order_id])
  if 开票方式 == "平台开具":
      [开票信息进度] = API_查询开票进度([name])
      if 开票信息进度 == "null":
          ANSWER_结束回复2()
      else:
          [卡类型] = API_查询会员状态([card_id])
          if 卡类型 == "白金卡":
              if 发票类型 == "电子普票":
                  ANSWER_白金电子普票开具()
              elif 发票类型 == "纸质普票":
                  ANSWER_白金纸质发票开具()
              elif 发票类型 == "纸质专票":
                  ANSWER_白金纸质专票开具()
          elif 卡类型 == "非白金卡":
              if 发票类型 == "电子普票":
                  ANSWER_非白金电子票开具()
              elif 发票类型 == "纸质普票":
                  ANSWER_非白金纸质普票()
              elif 发票类型 == "纸质专票":
                  ANSWER_非白金纸质专票()
  elif 开票方式 == "酒店开具":
      ANSWER_结束回复1()